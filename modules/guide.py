# modules/guide.py - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥
from aiogram import Router, F
from aiogram.types import Message, CallbackQuery, InlineKeyboardMarkup, InlineKeyboardButton

router = Router(name="guide")

@router.message(F.text == "/guide")
async def show_guide_menu(message: Message):
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üé£ –û—Å–Ω–æ–≤—ã —Ä—ã–±–∞–ª–∫–∏", callback_data="guide:fishing"), InlineKeyboardButton(text="‚ö° –£–ª—É—á—à–µ–Ω–∏—è", callback_data="guide:upgrades")],
        [InlineKeyboardButton(text="üêâ –ë–æ—Å—Å—ã", callback_data="guide:bosses"), InlineKeyboardButton(text="üè™ –ú–∞–≥–∞–∑–∏–Ω—ã", callback_data="guide:shops")],
        [InlineKeyboardButton(text="üì¶ –ö–µ–π—Å—ã", callback_data="guide:cases"), InlineKeyboardButton(text="üåä –ë–æ–ª–æ—Ç–æ", callback_data="guide:swamp")],
        [InlineKeyboardButton(text="üéÅ –î–æ–Ω–∞—Ç", callback_data="guide:donate")],
    ])
    
    await message.answer(
        "üìã <b>–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ –∏–≥—Ä–µ</b>\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:",
        reply_markup=keyboard,
        parse_mode="HTML"
    )

@router.callback_query(F.data.startswith("guide:"))
async def show_guide_section(callback: CallbackQuery):
    section = callback.data.split(":")[1]
    
    guides = {
        "fishing": (
            "üé£ <b>–û—Å–Ω–æ–≤—ã —Ä—ã–±–∞–ª–∫–∏</b>\n\n"
            "‚Ä¢ –ù–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É '–†—ã–±–∞—á–∏—Ç—å' –∫–∞–∂–¥—ã–µ 0.8 —Å–µ–∫—É–Ω–¥\n"
            "‚Ä¢ –£–ª–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è —É–¥–æ—á–∫–∏ (2^—É—Ä–æ–≤–µ–Ω—å)\n"
            "‚Ä¢ –ï—Å—Ç—å —à–∞–Ω—Å –Ω–∞ —Ö2 —É–ª–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É–¥–∞—á–∏)\n"
            "‚Ä¢ –ü—Ä–∏ —Ä—ã–±–∞–ª–∫–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–æ—Ä—Å–∫–∏–µ –∑–≤—ë–∑–¥—ã\n"
            "‚Ä¢ –¢–∞–∫–∂–µ –µ—Å—Ç—å —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –∫–µ–π—Å—ã —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏\n\n"
            "üí° <b>–°–æ–≤–µ—Ç—ã:</b>\n"
            "‚Ä¢ –ü—Ä–æ–∫–∞—á–∏–≤–∞–π—Ç–µ —É–¥–æ—á–∫—É –¥–ª—è –±–æ–ª—å—à–µ–≥–æ —É–ª–æ–≤–∞\n"
            "‚Ä¢ –£–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —à–∞–Ω—Å –º–æ—Ä—Å–∫–∏—Ö –∑–≤—ë–∑–¥\n"
            "‚Ä¢ –ù–∞–Ω–∏–º–∞–π—Ç–µ —Ä–∞–±–æ—á–∏—Ö –¥–ª—è –±–æ–Ω—É—Å–∞ –∫ –ø—Ä–æ–¥–∞–∂–µ"
        ),
        "upgrades": (
            "‚ö° <b>–°–∏—Å—Ç–µ–º–∞ —É–ª—É—á—à–µ–Ω–∏–π</b>\n\n"
            "üé£ <b>–£–¥–æ—á–∫–∞:</b> –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É–ª–æ–≤ (–¥–æ 60 —É—Ä–æ–≤–Ω—è)\n"
            "‚≠ê <b>–®–∞–Ω—Å –∑–≤—ë–∑–¥:</b> –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞–π—Ç–∏ –∑–≤—ë–∑–¥—ã (–¥–æ 50%)\n"
            "üçÄ <b>–£–¥–∞—á–∞:</b> –®–∞–Ω—Å –Ω–∞ —Ö2 —É–ª–æ–≤ (–¥–æ 75%)\n"
            "üöÄ <b>–ë—É—Å—Ç–µ—Ä—ã:</b> –í—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å–∏–ª–µ–Ω–∏—è\n\n"
            "üèÜ <b>–ü—Ä–µ—Å—Ç–∏–∂:</b>\n"
            "‚Ä¢ –ù–∞ 60+ —É—Ä–æ–≤–Ω–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ—Å—Ç–∏–∂\n"
            "‚Ä¢ –î–∞—ë—Ç –ø–µ—á–µ–Ω—å–∫–∏ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å\n"
            "‚Ä¢ –ö–∞–∂–¥—ã–π –ø—Ä–µ—Å—Ç–∏–∂ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É\n"
            "‚Ä¢ –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–µ—Å—Ç–∏–∂ –Ω–∞ +5 —É—Ä–æ–≤–Ω–µ–π"
        ),
        "bosses": (
            "üêâ <b>–°–∏—Å—Ç–µ–º–∞ –±–æ—Å—Å–æ–≤</b>\n\n"
            "–î–æ—Å—Ç—É–ø–Ω—ã–µ –±–æ—Å—Å—ã:\n"
            "üêü –©—É–∫–∞ (—É—Ä.1) - 1 —á–∞—Å —Ä–µ—Å–ø–∞–≤–Ω\n"
            "ü¶à –ê–∫—É–ª–∞ (—É—Ä.5) - 2 —á–∞—Å–∞\n"
            "üêô –û—Å—å–º–∏–Ω–æ–≥ (—É—Ä.10) - 3 —á–∞—Å–∞\n"
            "üêã –ö–∏—Ç (—É—Ä.15) - 4 —á–∞—Å–∞\n"
            "üî± –û—Ö–æ—Ç–Ω–∏–∫ (—É—Ä.25) - 5 —á–∞—Å–æ–≤\n"
            "üêô –ö—Ç—É–ª—Ö—É (—É—Ä.35) - 6 —á–∞—Å–æ–≤\n"
            "üî± –ü–æ—Å–µ–π–¥–æ–Ω (—É—Ä.50) - 24 —á–∞—Å–∞\n\n"
            "üí° <b>–°–æ–≤–µ—Ç—ã:</b>\n"
            "‚Ä¢ –£—Ä–æ–Ω –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è —É–¥–æ—á–∫–∏\n"
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /bl –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞\n"
            "‚Ä¢ –í —á–µ—Ç–≤–µ—Ä–≥ —Ö2 –¥—Ä–æ–ø —Å –±–æ—Å—Å–æ–≤"
        ),
        "shops": (
            "üè™ <b>–ú–∞–≥–∞–∑–∏–Ω—ã</b>\n\n"
            "üåÖ <b>–î–Ω–µ–≤–Ω–æ–π –º–∞–≥–∞–∑–∏–Ω:</b>\n"
            "‚≠ê –ó–∞ –º–æ—Ä—Å–∫–∏–µ –∑–≤—ë–∑–¥—ã - –±–∞–∑–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è\n"
            "üç™ –ó–∞ –ø–µ—á–µ–Ω—å–∫–∏ - –º–æ—â–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è\n\n"
            "üéÅ <b>–î–æ–Ω–∞—Ç –º–∞–≥–∞–∑–∏–Ω:</b>\n"
            "‚Ä¢ –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ —Ä—ã–±—ã\n"
            "‚Ä¢ –ë—É—Å—Ç–µ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏\n"
            "‚Ä¢ –û—Å–æ–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è\n\n"
            "üé´ <b>–ü—Ä–æ–º–æ–∫–æ–¥—ã:</b>\n"
            "‚Ä¢ –í–≤–æ–¥–∏—Ç–µ /promo –ö–û–î\n"
            "‚Ä¢ –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∫–∞–Ω–∞–ª–∞"
        ),
        "cases": (
            "üì¶ <b>–°–∏—Å—Ç–µ–º–∞ –∫–µ–π—Å–æ–≤</b>\n\n"
            "–¢–∏–ø—ã –∫–µ–π—Å–æ–≤ (–ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏):\n"
            "ü•´ –ë–∞–Ω–∫–∞ (40%) - –¥–µ–Ω—å–≥–∏, –∏–Ω–æ–≥–¥–∞ –∑–≤—ë–∑–¥—ã\n"
            "üì¶ –°—É–Ω–¥—É–∫ (25%) - –¥–µ–Ω—å–≥–∏ + –∑–≤—ë–∑–¥—ã\n"
            "‚≠ê –Ø—â–∏–∫ –∑–≤—ë–∑–¥ (15%) - –º–Ω–æ–≥–æ –∑–≤—ë–∑–¥\n"
            "üéí –°—É–º–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (10%) - –º–∞—Ç–µ—Ä–∏–∞–ª—ã\n"
            "‚öîÔ∏è –Ø—â–∏–∫ –æ—Ä—É–∂–∏—è (7%) - –≤—Å—ë –ø–æ–Ω–µ–º–Ω–æ–≥—É\n"
            "üíé –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Å–µ–π—Ñ (3%) - –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ\n\n"
            "üí° –ù–∞–≥—Ä–∞–¥—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —É—Ä–æ–≤–Ω—è —É–¥–æ—á–∫–∏!"
        ),
        "swamp": (
            "üåä <b>–ë–æ–ª–æ—Ç–æ</b>\n\n"
            "üèó <b>–ü–æ—Å—Ç—Ä–æ–π–∫–∏:</b>\n"
            "üèö –•–∏–∂–∏–Ω–∞ (10‚≠ê) - –±–∞–∑–æ–≤–∞—è –ø–æ—Å—Ç—Ä–æ–π–∫–∞\n"
            "üõ• –ü—Ä–∏—á–∞–ª (25‚≠ê) - —É–ª—É—á—à–µ–Ω–Ω–∞—è\n"
            "üóº –ë–∞—à–Ω—è (50‚≠ê) - —ç–ª–∏—Ç–Ω–∞—è\n\n"
            "üë∑ <b>–†–∞–±–æ—á–∏–µ (–º–∞–∫—Å. 3):</b>\n"
            "1-–π: –ó–∞ –¥–µ–Ω—å–≥–∏ (10,000$)\n"
            "2-–π: –ó–∞ –∑–≤—ë–∑–¥—ã (50‚≠ê)\n"
            "3-–π: –ó–∞ –ø–µ—á–µ–Ω—å–∫–∏ (20üç™)\n\n"
            "üèÜ <b>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</b>\n"
            "–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –Ω–∞–≥—Ä–∞–¥!"
        ),
        "donate": (
            "üéÅ <b>–î–æ–Ω–∞—Ç —Å–∏—Å—Ç–µ–º–∞</b>\n\n"
            "üí∞ <b>Telegram Stars:</b>\n"
            "‚Ä¢ 1‚≠ê = 5üç™\n"
            "‚Ä¢ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ Telegram\n\n"
            "üç™ <b>–ü–µ—á–µ–Ω—å–∫–∏ —Ç—Ä–∞—Ç—è—Ç—Å—è –Ω–∞:</b>\n"
            "‚Ä¢ –ú–æ—â–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏\n"
            "‚Ä¢ –ü—Ä–µ–º–∏—É–º —Ç–æ–≤–∞—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ\n"
            "‚Ä¢ –ù–∞–π–º 3-–≥–æ —Ä–∞–±–æ—á–µ–≥–æ\n"
            "‚Ä¢ –û—Å–æ–±—ã–µ –±—É—Å—Ç–µ—Ä—ã\n\n"
            "üéØ <b>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–µ—á–µ–Ω—å–∫–∏:</b>\n"
            "‚Ä¢ –ö—É–ø–∏—Ç—å –∑–∞ Telegram Stars\n"
            "‚Ä¢ –ü—Ä–µ—Å—Ç–∏–∂ —É–¥–æ—á–∫–∏\n"
            "‚Ä¢ –ü—Ä–æ–º–æ–∫–æ–¥—ã"
        )
    }
    
    text = guides.get(section, "–†–∞–∑–¥–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üîô –ö —Ä–∞–∑–¥–µ–ª–∞–º", callback_data="back_to_guide")]
    ])
    
    await callback.message.edit_text(text, reply_markup=keyboard, parse_mode="HTML")

@router.callback_query(F.data == "back_to_guide")
async def back_to_guide(callback: CallbackQuery):
    await show_guide_menu(callback.message)
